<!-- Header -->
<header class="w3-container">
    <!--<a href="#"><img src="http://www.w3schools.com/w3css/img_avatar_g2.jpg" style="width:65px;" class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>-->
    <h4 style="margin:10px;font-family:Tahoma, Geneva, sans-serif;">3/3: Your finished design</h4>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</header>

<!-- Grid -->
<div class="w3-row">
    <div class="w3-col 16 s12" align="middle">
        <div style="background-color: white">
            <div class="w3-content w3-display-container">
                <div class="w3-content w3-display-container" id="showpanel" style="height: 80%;">
                    <img style="width:0px;height:0px;">
                    {{#each imagelist}}
                        <object id="svgObj-{{@index}}" class="mySlides" type="image/svg+xml" data="/designs/{{image}}"
                                style="width:100%; background-color: white;">
                        </object>
                    {{/each}}

                    <img style="width:0px;height:0px;">
                </div>

                <div class="w3-content w3-display-container">
                    <a id="play" class="w3-display-bottommiddle" onclick="pause()">
                        <span style="font-size:24px;padding:10px;margin:10px;" class="glyphicon glyphicon-pause"
                              aria-hidden="false"></span></a>
                </div>
            </div>
        </div>
    </div>
</div>
{{#section 'jquery'}}
    <script>
//        var imageIndex = 0;
        var isPause = 0;
        //        showImage(imageIndex);
        function getWidth() {
            var w = $(window).width();
            var h = $(window).height() - 45;
            if (w/h > 1.6) {
                return "";
            }
            else if (w < 600) {
                return w+"px";
            } else {
                return "600px";
            }
        }
        function getHeight() {
            var w = $(window).width();
            var h = $(window).height() - 45;
            if (w/h < 1.6) {
                return "";
            }
            else if (h > 475) {
                return "475px";
            }
            else {
                return h+"px";
            }
        }
        function getMargin() {
            var w = $(window).width();
            var h = $(window).height() - 45;
            console.log(w+","+h+"w/h:"+w/h);
            if (w/h > 1.6) {
                return "0px";
            }
            else {
                return "20%";
            }
        }
//        function getTopMargin() {
//            var h = $(window).height() - 45;
//            console.log("slideIndex:"+slideIndex);
//            var tempIndex = slideIndex - 1;
//            var ch = $("#svgObj-"+tempIndex).height();
//            var marginNum = (h - ch)/2;
//            if (marginNum < 0)
//                marginNum = 0;
//            console.log(h+","+ch+"marginNum"+marginNum);
//            return marginNum +"px";
//        }
//        function showImage(n) {
//            console.log("showImage:" + n);
//            imageIndex = n;
//
//            count = 0;
//            do {
//                var i = document.getElementById("icon-" + count);
//                if (i === null || i === undefined)
//                    break;
//                if (count === n) {
//                    i.style.borderColor = "darkgrey";
//                    i.style.borderWidth = "4px";
//                    document.getElementById("svgObj-" + count).style.width = "100%";
//                }
//                else {
//                    i.style.borderWidth = "0px";
//                    document.getElementById("svgObj-" + count).style.width = "0%";
//                }
//                count++;
//            } while (true);
//        }
//        var topMargin = getTopMargin();
        function pause() {
            var ele = document.getElementById("play");
            ele.onclick = play;
            ele.innerHTML = '<span style="font-size:24px;padding:10px;" class="glyphicon glyphicon-play" aria-hidden="false"></span>';
            isPause = 1;
        }
        function play() {
            var ele = document.getElementById("play");
            ele.onclick = pause;
            ele.innerHTML = '<span style="font-size:24px;padding:10px;" class="glyphicon glyphicon-pause" aria-hidden="false"></span>';
            isPause = 0;
//            topMargin = getTopMargin();
            carousel();
        }
        var slideIndex = 0;
        //        showDivs(slideIndex);
        carousel();

        //        function plusDivs(n) {
        //            showDivs(slideIndex += n);
        //        }
        //
        //        function showDivs(n) {
        //            var i;
        //            var x = document.getElementsByClassName("mySlides");
        //            if (n > x.length) {slideIndex = 1}
        //            if (n < 1) {slideIndex = x.length}
        //            for (i = 0; i < x.length; i++) {
        //                if (i === slideIndex-1) {
        //                    console.log("show "+i);
        //                    x[slideIndex-1].style.width = "100%";
        //                    x[slideIndex-1].style.height = "100%";
        //                }
        //                else {
        //                    x[i].style.width = "0%";
        //                    x[i].style.height = "0%";
        //                }
        //            }
        //        }
        function carousel() {
            if (isPause === 1)
                return;
            var x = document.getElementsByClassName("mySlides");
            slideIndex++;
            if (slideIndex > x.length) {
                slideIndex = 1
            }
            var i;
            for (i = 0; i < x.length; i++) {
                if (i === slideIndex - 1) {
//                    console.log("show "+i);
                    x[slideIndex - 1].style.width = getWidth();
                    x[slideIndex - 1].style.height = getHeight();
//                    getTopMargin();
//                    x[slideIndex - 1].style.marginTop = getMargin();
//                    x[slideIndex - 1].style.marginBottom = getMargin();
                }
                else {
                    x[i].style.width = "0%";
                    x[i].style.height = "0%";
                }
            }
            if (isPause === 0)
                setTimeout(carousel, 3000); // Change image every 2 seconds
        }
//        function resize() {
//            var w = getWidth();
//            var h = getHeight();
////            topMargin = getTopMargin();
//            console.log(w+","+h);
//        }
//        window.onresize = resize;
    </script>
{{/section}}